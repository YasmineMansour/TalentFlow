<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>
<?import javafx.geometry.Insets?>

<HBox alignment="CENTER" prefHeight="600.0" prefWidth="900.0"
      xmlns="http://javafx.com/javafx/17"
      xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="org.example.GUI.ResetPasswordController"
      stylesheets="@styles.css">

    <!-- Left decorative panel -->
    <VBox alignment="CENTER" spacing="20" prefWidth="400"
          style="-fx-background-color: linear-gradient(to bottom right, #00b894, #55efc4); -fx-padding: 50;">
        <children>
            <Label text="ðŸ”’" style="-fx-font-size: 64px;"/>
            <Label text="Nouveau mot de passe"
                   style="-fx-text-fill: white; -fx-font-size: 28px; -fx-font-weight: bold;"/>
            <Label text="CrÃ©ez un mot de passe sÃ©curisÃ© pour protÃ©ger votre compte."
                   style="-fx-text-fill: rgba(255,255,255,0.85); -fx-font-size: 14px;" wrapText="true" textAlignment="CENTER"/>
            <Region prefHeight="10"/>
            <Label text="Minimum 8 caractÃ¨res, 1 majuscule,&#10;1 chiffre et 1 symbole requis"
                   style="-fx-text-fill: rgba(255,255,255,0.7); -fx-font-size: 12px;" wrapText="true" textAlignment="CENTER"/>
        </children>
    </VBox>

    <!-- Right form -->
    <VBox alignment="CENTER" spacing="8" prefWidth="500" style="-fx-background-color: white; -fx-padding: 40;">
        <children>
            <Label text="RÃ©initialisation" styleClass="title-label">
                <VBox.margin><Insets bottom="3"/></VBox.margin>
            </Label>
            <Label fx:id="infoLabel" text="Entrez le code reÃ§u par email" styleClass="subtitle-label">
                <VBox.margin><Insets bottom="20"/></VBox.margin>
            </Label>

            <VBox maxWidth="340" spacing="14">
                <children>
                    <!-- Code -->
                    <VBox spacing="6">
                        <Label text="Code de vÃ©rification"
                               style="-fx-text-fill: #636e72; -fx-font-size: 12px; -fx-font-weight: bold;"/>
                        <TextField fx:id="codeField" promptText="Code Ã  6 chiffres" styleClass="text-field"
                                   style="-fx-font-size: 18px; -fx-alignment: center;" alignment="CENTER"/>
                    </VBox>

                    <!-- New password with eye toggle -->
                    <VBox spacing="6">
                        <Label text="Nouveau mot de passe"
                               style="-fx-text-fill: #636e72; -fx-font-size: 12px; -fx-font-weight: bold;"/>
                        <HBox spacing="0" alignment="CENTER_LEFT">
                            <StackPane HBox.hgrow="ALWAYS">
                                <PasswordField fx:id="newPasswordField" promptText="Nouveau mot de passe"
                                               styleClass="password-field"/>
                                <TextField fx:id="newPasswordVisible" promptText="Nouveau mot de passe"
                                           styleClass="text-field" visible="false"/>
                            </StackPane>
                            <Button fx:id="togglePasswordBtn" text="ðŸ‘" onAction="#togglePassword"
                                    styleClass="btn-toggle-password"/>
                        </HBox>
                    </VBox>

                    <!-- Confirm password with eye toggle -->
                    <VBox spacing="6">
                        <Label text="Confirmer le mot de passe"
                               style="-fx-text-fill: #636e72; -fx-font-size: 12px; -fx-font-weight: bold;"/>
                        <HBox spacing="0" alignment="CENTER_LEFT">
                            <StackPane HBox.hgrow="ALWAYS">
                                <PasswordField fx:id="confirmPasswordField" promptText="Confirmez le mot de passe"
                                               styleClass="password-field"/>
                                <TextField fx:id="confirmPasswordVisible" promptText="Confirmez le mot de passe"
                                           styleClass="text-field" visible="false"/>
                            </StackPane>
                            <Button fx:id="toggleConfirmBtn" text="ðŸ‘" onAction="#toggleConfirmPassword"
                                    styleClass="btn-toggle-password"/>
                        </HBox>
                    </VBox>

                    <!-- Reset button -->
                    <Button text="RÃ©initialiser le mot de passe" onAction="#handleResetPassword"
                            maxWidth="Infinity" styleClass="btn-success">
                        <VBox.margin><Insets top="6"/></VBox.margin>
                    </Button>

                    <!-- Status label -->
                    <Label fx:id="statusLabel" textAlignment="CENTER" wrapText="true"
                           styleClass="error-label"/>

                    <Separator>
                        <VBox.margin><Insets top="3" bottom="3"/></VBox.margin>
                    </Separator>

                    <Hyperlink text="â† Retour Ã  la connexion" onAction="#handleBackToLogin"
                               alignment="CENTER" maxWidth="Infinity" styleClass="hyperlink"/>
                </children>
            </VBox>
        </children>
    </VBox>
</HBox>
